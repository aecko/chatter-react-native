{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Seamus\\\\Documents\\\\ChatApp\\\\chat-app\\\\components\\\\JoinRoomScreen.js\";\nimport React, { useContext, useState } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport useWindowDimensions from \"react-native-web/dist/exports/useWindowDimensions\";\nimport PixelRatio from \"react-native-web/dist/exports/PixelRatio\";\nimport AuthContext from \"../contexts/AuthContext\";\nimport firebase from 'firebase';\nimport 'firebase/firestore';\nexport default function JoinRoomScreen(props) {\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      roomCodeInput = _useState2[0],\n      setRoomCodeInput = _useState2[1];\n\n  var _useContext = useContext(AuthContext),\n      setRoomCode = _useContext.setRoomCode,\n      auth = _useContext.auth,\n      firestore = _useContext.firestore;\n\n  var joinRoom = function joinRoom() {\n    var uid, messageRefUser, checkRoomRef, roomExists;\n    return _regeneratorRuntime.async(function joinRoom$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            uid = auth.currentUser.uid;\n            messageRefUser = firestore.collection('users').doc(uid);\n            checkRoomRef = firestore.collection('rooms').doc(roomCodeInput);\n            roomExists = false;\n            checkRoomRef.get().then(function _callee(docSnapShot) {\n              return _regeneratorRuntime.async(function _callee$(_context) {\n                while (1) {\n                  switch (_context.prev = _context.next) {\n                    case 0:\n                      if (docSnapShot.exists) {\n                        roomExists = true;\n                      } else {\n                        console.log('Room Doesn\\'t exist');\n                      }\n\n                    case 1:\n                    case \"end\":\n                      return _context.stop();\n                  }\n                }\n              }, null, null, null, Promise);\n            });\n            messageRefUser.get().then(function _callee2(docSnapShot) {\n              return _regeneratorRuntime.async(function _callee2$(_context2) {\n                while (1) {\n                  switch (_context2.prev = _context2.next) {\n                    case 0:\n                      if (!docSnapShot.exists) {\n                        _context2.next = 7;\n                        break;\n                      }\n\n                      _context2.next = 3;\n                      return _regeneratorRuntime.awrap(messageRefUser.update({\n                        currentRooms: firebase.firestore.FieldValue.arrayUnion(roomCodeInput)\n                      }));\n\n                    case 3:\n                      setRoomCode(roomCodeInput);\n                      props.showJoinRoom(false);\n                      _context2.next = 11;\n                      break;\n\n                    case 7:\n                      _context2.next = 9;\n                      return _regeneratorRuntime.awrap(messageRefUser.set({\n                        currentRooms: firebase.firestore.FieldValue.arrayUnion(roomCodeInput)\n                      }));\n\n                    case 9:\n                      setRoomCode(roomCodeInput);\n                      props.showJoinRoom(false);\n\n                    case 11:\n                    case \"end\":\n                      return _context2.stop();\n                  }\n                }\n              }, null, null, null, Promise);\n            });\n\n          case 6:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var fontRatio = PixelRatio.getFontScale();\n\n  var _useWindowDimensions = useWindowDimensions(),\n      width = _useWindowDimensions.width,\n      height = _useWindowDimensions.height;\n\n  var joinRoomPopupWidth = 400;\n\n  if (width < 1280) {\n    joinRoomPopupWidth *= 0.75 * fontRatio;\n  }\n\n  var styles = StyleSheet.create({\n    JoinRoomContainer: {\n      flex: 1,\n      flexDirection: 'column',\n      justifyContent: 'flex-start',\n      alignItems: 'center',\n      height: 250 * fontRatio,\n      width: joinRoomPopupWidth * fontRatio,\n      borderRadius: 20,\n      backgroundColor: '#fff',\n      position: 'absolute',\n      top: height / 2 - 125,\n      left: width / 2 - joinRoomPopupWidth / 2,\n      zIndex: 2,\n      shadowColor: '#000',\n      shadowOffset: {\n        width: 0,\n        height: -1\n      },\n      shadowOpacity: 0.9,\n      shadowRadius: 50,\n      elevation: 5\n    },\n    JoinRoomTitle: {\n      fontSize: 20,\n      zIndex: 2\n    },\n    JoinRoomTextInput: {\n      height: 70 * fontRatio,\n      width: joinRoomPopupWidth - 100,\n      fontSize: 15 * fontRatio,\n      backgroundColor: '#d5d8dc',\n      borderRadius: 20,\n      marginBottom: 10 * fontRatio,\n      textAlign: 'center',\n      outlineWidth: 0\n    },\n    DarkOverlay: {\n      flex: 1,\n      flexDirection: 'column',\n      justifyContent: 'flex-start',\n      alignItems: 'center',\n      width: width,\n      height: height,\n      backgroundColor: '#0b2946',\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      zIndex: 1,\n      opacity: 0.8\n    },\n    JoinRoomHeader: {\n      flex: 1,\n      flexDirection: 'row',\n      justifyContent: 'center',\n      alignItems: 'center',\n      width: joinRoomPopupWidth * fontRatio,\n      maxHeight: 60 * fontRatio,\n      borderTopLeftRadius: 20,\n      borderTopRightRadius: 20,\n      backgroundColor: '#3498db'\n    },\n    JoinRoomInputContainer: {\n      flex: 1,\n      flexDirection: 'column',\n      justifyContent: 'center',\n      alignItems: 'center'\n    },\n    JoinRoomCloseButton: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      flex: 1,\n      justifyContent: 'center',\n      alignItems: 'center',\n      backgroundColor: '#3498db',\n      marginTop: 15 * fontRatio,\n      marginLeft: 15 * fontRatio,\n      maxWidth: 30 * fontRatio,\n      maxHeight: 30 * fontRatio\n    },\n    CloseMenuText: {\n      fontSize: 20,\n      color: '#fff',\n      padding: 5 * fontRatio\n    },\n    JoinRoomSubmit: {\n      flex: 1,\n      justifyContent: 'center',\n      alignItems: 'center',\n      borderRadius: 20,\n      backgroundColor: '#3498db',\n      maxHeight: 50 * fontRatio\n    },\n    JoinRoomButtonText: {\n      color: '#fff',\n      padding: 10 * fontRatio\n    }\n  });\n  return React.createElement(View, {\n    style: styles.DarkOverlay,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: styles.JoinRoomContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 13\n    }\n  }, React.createElement(View, {\n    style: styles.JoinRoomHeader,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 17\n    }\n  }, React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return props.showJoinRoom(false);\n    },\n    style: styles.JoinRoomCloseButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 21\n    }\n  }, React.createElement(Text, {\n    style: styles.CloseMenuText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 25\n    }\n  }, \"X\")), React.createElement(Text, {\n    style: styles.JoinRoomTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 21\n    }\n  }, \"Join a new room\")), React.createElement(View, {\n    style: styles.JoinRoomInputContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 17\n    }\n  }, React.createElement(TextInput, {\n    onChangeText: function onChangeText(text) {\n      return setRoomCodeInput(text);\n    },\n    style: styles.JoinRoomTextInput,\n    placeholder: \"Enter room code\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 21\n    }\n  }), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return joinRoom();\n    },\n    style: styles.JoinRoomSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 21\n    }\n  }, React.createElement(Text, {\n    style: styles.JoinRoomButtonText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 25\n    }\n  }, \"Join Room\")))));\n}","map":{"version":3,"sources":["C:/Users/Seamus/Documents/ChatApp/chat-app/components/JoinRoomScreen.js"],"names":["React","useContext","useState","AuthContext","firebase","JoinRoomScreen","props","roomCodeInput","setRoomCodeInput","setRoomCode","auth","firestore","joinRoom","uid","currentUser","messageRefUser","collection","doc","checkRoomRef","roomExists","get","then","docSnapShot","exists","console","log","update","currentRooms","FieldValue","arrayUnion","showJoinRoom","set","fontRatio","PixelRatio","getFontScale","useWindowDimensions","width","height","joinRoomPopupWidth","styles","StyleSheet","create","JoinRoomContainer","flex","flexDirection","justifyContent","alignItems","borderRadius","backgroundColor","position","top","left","zIndex","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","JoinRoomTitle","fontSize","JoinRoomTextInput","marginBottom","textAlign","outlineWidth","DarkOverlay","opacity","JoinRoomHeader","maxHeight","borderTopLeftRadius","borderTopRightRadius","JoinRoomInputContainer","JoinRoomCloseButton","marginTop","marginLeft","maxWidth","CloseMenuText","color","padding","JoinRoomSubmit","JoinRoomButtonText","text"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,QAA5B,QAA4C,OAA5C;;;;;;;;AAEA,OAAOC,WAAP;AACA,OAAOC,QAAP,MAAqB,UAArB;AACA,OAAO,oBAAP;AAEA,eAAe,SAASC,cAAT,CAAwBC,KAAxB,EAA+B;AAAA,kBAEAJ,QAAQ,CAAC,EAAD,CAFR;AAAA;AAAA,MAEnCK,aAFmC;AAAA,MAEpBC,gBAFoB;;AAAA,oBAGDP,UAAU,CAACE,WAAD,CAHT;AAAA,MAGlCM,WAHkC,eAGlCA,WAHkC;AAAA,MAGrBC,IAHqB,eAGrBA,IAHqB;AAAA,MAGfC,SAHe,eAGfA,SAHe;;AAK1C,MAAMC,QAAQ,GAAG,SAAXA,QAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AACLC,YAAAA,GADK,GACGH,IAAI,CAACI,WADR,CACLD,GADK;AAEPE,YAAAA,cAFO,GAEUJ,SAAS,CAACK,UAAV,CAAqB,OAArB,EAA8BC,GAA9B,CAAkCJ,GAAlC,CAFV;AAGPK,YAAAA,YAHO,GAGQP,SAAS,CAACK,UAAV,CAAqB,OAArB,EAA8BC,GAA9B,CAAkCV,aAAlC,CAHR;AAITY,YAAAA,UAJS,GAII,KAJJ;AAObD,YAAAA,YAAY,CAACE,GAAb,GACKC,IADL,CACU,iBAAOC,WAAP;AAAA;AAAA;AAAA;AAAA;AACF,0BAAIA,WAAW,CAACC,MAAhB,EAAwB;AACpBJ,wBAAAA,UAAU,GAAG,IAAb;AACH,uBAFD,MAGK;AACDK,wBAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACH;;AANC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADV;AAWAV,YAAAA,cAAc,CAACK,GAAf,GACKC,IADL,CACU,kBAAOC,WAAP;AAAA;AAAA;AAAA;AAAA;AAAA,2BACEA,WAAW,CAACC,MADd;AAAA;AAAA;AAAA;;AAAA;AAAA,uDAEQR,cAAc,CAACW,MAAf,CAAsB;AACxBC,wBAAAA,YAAY,EAAEvB,QAAQ,CAACO,SAAT,CAAmBiB,UAAnB,CAA8BC,UAA9B,CAAyCtB,aAAzC;AADU,uBAAtB,CAFR;;AAAA;AAKEE,sBAAAA,WAAW,CAACF,aAAD,CAAX;AACAD,sBAAAA,KAAK,CAACwB,YAAN,CAAmB,KAAnB;AANF;AAAA;;AAAA;AAAA;AAAA,uDASQf,cAAc,CAACgB,GAAf,CAAmB;AACrBJ,wBAAAA,YAAY,EAAEvB,QAAQ,CAACO,SAAT,CAAmBiB,UAAnB,CAA8BC,UAA9B,CAAyCtB,aAAzC;AADO,uBAAnB,CATR;;AAAA;AAYEE,sBAAAA,WAAW,CAACF,aAAD,CAAX;AACAD,sBAAAA,KAAK,CAACwB,YAAN,CAAmB,KAAnB;;AAbF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADV;;AAlBa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAjB;;AAqCA,MAAME,SAAS,GAAGC,UAAU,CAACC,YAAX,EAAlB;;AA1C0C,6BA2ChBC,mBAAmB,EA3CH;AAAA,MA2ClCC,KA3CkC,wBA2ClCA,KA3CkC;AAAA,MA2C3BC,MA3C2B,wBA2C3BA,MA3C2B;;AA4C1C,MAAIC,kBAAkB,GAAG,GAAzB;;AACA,MAAIF,KAAK,GAAG,IAAZ,EAAkB;AACdE,IAAAA,kBAAkB,IAAI,OAAON,SAA7B;AACH;;AACD,MAAMO,MAAM,GAAGC,UAAU,CAACC,MAAX,CAAkB;AAC7BC,IAAAA,iBAAiB,EAAE;AACfC,MAAAA,IAAI,EAAE,CADS;AAEfC,MAAAA,aAAa,EAAE,QAFA;AAGfC,MAAAA,cAAc,EAAE,YAHD;AAIfC,MAAAA,UAAU,EAAE,QAJG;AAKfT,MAAAA,MAAM,EAAE,MAAML,SALC;AAMfI,MAAAA,KAAK,EAAEE,kBAAkB,GAAGN,SANb;AAOfe,MAAAA,YAAY,EAAE,EAPC;AAQfC,MAAAA,eAAe,EAAE,MARF;AASfC,MAAAA,QAAQ,EAAE,UATK;AAUfC,MAAAA,GAAG,EAAEb,MAAM,GAAG,CAAT,GAAa,GAVH;AAWfc,MAAAA,IAAI,EAAEf,KAAK,GAAG,CAAR,GAAYE,kBAAkB,GAAG,CAXxB;AAYfc,MAAAA,MAAM,EAAE,CAZO;AAafC,MAAAA,WAAW,EAAE,MAbE;AAcfC,MAAAA,YAAY,EAAE;AAAElB,QAAAA,KAAK,EAAE,CAAT;AAAYC,QAAAA,MAAM,EAAE,CAAC;AAArB,OAdC;AAefkB,MAAAA,aAAa,EAAE,GAfA;AAgBfC,MAAAA,YAAY,EAAE,EAhBC;AAiBfC,MAAAA,SAAS,EAAE;AAjBI,KADU;AAoB7BC,IAAAA,aAAa,EAAE;AACXC,MAAAA,QAAQ,EAAE,EADC;AAEXP,MAAAA,MAAM,EAAE;AAFG,KApBc;AAwB7BQ,IAAAA,iBAAiB,EAAE;AACfvB,MAAAA,MAAM,EAAE,KAAKL,SADE;AAEfI,MAAAA,KAAK,EAAEE,kBAAkB,GAAG,GAFb;AAGfqB,MAAAA,QAAQ,EAAE,KAAK3B,SAHA;AAIfgB,MAAAA,eAAe,EAAE,SAJF;AAKfD,MAAAA,YAAY,EAAE,EALC;AAMfc,MAAAA,YAAY,EAAE,KAAK7B,SANJ;AAOf8B,MAAAA,SAAS,EAAE,QAPI;AAQfC,MAAAA,YAAY,EAAE;AARC,KAxBU;AAkC7BC,IAAAA,WAAW,EAAE;AACTrB,MAAAA,IAAI,EAAE,CADG;AAETC,MAAAA,aAAa,EAAE,QAFN;AAGTC,MAAAA,cAAc,EAAE,YAHP;AAITC,MAAAA,UAAU,EAAE,QAJH;AAKTV,MAAAA,KAAK,EAAEA,KALE;AAMTC,MAAAA,MAAM,EAAEA,MANC;AAOTW,MAAAA,eAAe,EAAE,SAPR;AAQTC,MAAAA,QAAQ,EAAE,UARD;AASTC,MAAAA,GAAG,EAAE,CATI;AAUTC,MAAAA,IAAI,EAAE,CAVG;AAWTC,MAAAA,MAAM,EAAE,CAXC;AAYTa,MAAAA,OAAO,EAAE;AAZA,KAlCgB;AAgD7BC,IAAAA,cAAc,EAAE;AACZvB,MAAAA,IAAI,EAAE,CADM;AAEZC,MAAAA,aAAa,EAAE,KAFH;AAGZC,MAAAA,cAAc,EAAE,QAHJ;AAIZC,MAAAA,UAAU,EAAE,QAJA;AAKZV,MAAAA,KAAK,EAAEE,kBAAkB,GAAGN,SALhB;AAMZmC,MAAAA,SAAS,EAAE,KAAKnC,SANJ;AAOZoC,MAAAA,mBAAmB,EAAE,EAPT;AAQZC,MAAAA,oBAAoB,EAAE,EARV;AASZrB,MAAAA,eAAe,EAAE;AATL,KAhDa;AA2D7BsB,IAAAA,sBAAsB,EAAE;AACpB3B,MAAAA,IAAI,EAAE,CADc;AAEpBC,MAAAA,aAAa,EAAE,QAFK;AAGpBC,MAAAA,cAAc,EAAE,QAHI;AAIpBC,MAAAA,UAAU,EAAE;AAJQ,KA3DK;AAiE7ByB,IAAAA,mBAAmB,EAAE;AACjBtB,MAAAA,QAAQ,EAAE,UADO;AAEjBC,MAAAA,GAAG,EAAE,CAFY;AAGjBC,MAAAA,IAAI,EAAE,CAHW;AAIjBR,MAAAA,IAAI,EAAE,CAJW;AAKjBE,MAAAA,cAAc,EAAE,QALC;AAMjBC,MAAAA,UAAU,EAAE,QANK;AAOjBE,MAAAA,eAAe,EAAE,SAPA;AAQjBwB,MAAAA,SAAS,EAAE,KAAKxC,SARC;AASjByC,MAAAA,UAAU,EAAE,KAAKzC,SATA;AAUjB0C,MAAAA,QAAQ,EAAE,KAAK1C,SAVE;AAWjBmC,MAAAA,SAAS,EAAE,KAAKnC;AAXC,KAjEQ;AA+E7B2C,IAAAA,aAAa,EAAE;AACXhB,MAAAA,QAAQ,EAAE,EADC;AAEXiB,MAAAA,KAAK,EAAE,MAFI;AAGXC,MAAAA,OAAO,EAAE,IAAI7C;AAHF,KA/Ec;AAoF7B8C,IAAAA,cAAc,EAAE;AACZnC,MAAAA,IAAI,EAAE,CADM;AAEZE,MAAAA,cAAc,EAAE,QAFJ;AAGZC,MAAAA,UAAU,EAAE,QAHA;AAIZC,MAAAA,YAAY,EAAE,EAJF;AAKZC,MAAAA,eAAe,EAAE,SALL;AAMZmB,MAAAA,SAAS,EAAE,KAAKnC;AANJ,KApFa;AA4F7B+C,IAAAA,kBAAkB,EAAE;AAChBH,MAAAA,KAAK,EAAE,MADS;AAEhBC,MAAAA,OAAO,EAAE,KAAK7C;AAFE;AA5FS,GAAlB,CAAf;AAkGA,SACI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEO,MAAM,CAACyB,WAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEzB,MAAM,CAACG,iBAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEH,MAAM,CAAC2B,cAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,gBAAD;AAAkB,IAAA,OAAO,EAAE;AAAA,aAAM5D,KAAK,CAACwB,YAAN,CAAmB,KAAnB,CAAN;AAAA,KAA3B;AAA4D,IAAA,KAAK,EAAES,MAAM,CAACgC,mBAA1E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEhC,MAAM,CAACoC,aAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADJ,CADJ,EAII,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEpC,MAAM,CAACmB,aAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAJJ,CADJ,EAOI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEnB,MAAM,CAAC+B,sBAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,SAAD;AAAW,IAAA,YAAY,EAAE,sBAAAU,IAAI;AAAA,aAAIxE,gBAAgB,CAACwE,IAAD,CAApB;AAAA,KAA7B;AAAyD,IAAA,KAAK,EAAEzC,MAAM,CAACqB,iBAAvE;AAA0F,IAAA,WAAW,EAAC,iBAAtG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAEI,oBAAC,gBAAD;AAAkB,IAAA,OAAO,EAAE;AAAA,aAAMhD,QAAQ,EAAd;AAAA,KAA3B;AAA6C,IAAA,KAAK,EAAE2B,MAAM,CAACuC,cAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEvC,MAAM,CAACwC,kBAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADJ,CAFJ,CAPJ,CADJ,CADJ;AAkBH","sourcesContent":["import React, { useContext, useState } from 'react'\r\nimport { StyleSheet, Text, View, TextInput, TouchableOpacity, useWindowDimensions, PixelRatio } from 'react-native'\r\nimport AuthContext from '../contexts/AuthContext'\r\nimport firebase from 'firebase'\r\nimport 'firebase/firestore'\r\n\r\nexport default function JoinRoomScreen(props) {\r\n\r\n    const [roomCodeInput, setRoomCodeInput] = useState('')\r\n    const { setRoomCode, auth, firestore } = useContext(AuthContext)\r\n\r\n    const joinRoom = async () => {\r\n        const { uid } = auth.currentUser;\r\n        const messageRefUser = firestore.collection('users').doc(uid);\r\n        const checkRoomRef = firestore.collection('rooms').doc(roomCodeInput);\r\n        var roomExists = false\r\n\r\n\r\n        checkRoomRef.get()\r\n            .then(async (docSnapShot) => {\r\n                if (docSnapShot.exists) {\r\n                    roomExists = true\r\n                }\r\n                else {\r\n                    console.log('Room Doesn\\'t exist')\r\n                }\r\n            })\r\n\r\n        //TODO: change .then to async await\r\n        messageRefUser.get()\r\n            .then(async (docSnapShot) => {\r\n                if (docSnapShot.exists) {\r\n                    await messageRefUser.update({\r\n                        currentRooms: firebase.firestore.FieldValue.arrayUnion(roomCodeInput)\r\n                    })\r\n                    setRoomCode(roomCodeInput)\r\n                    props.showJoinRoom(false)\r\n                }\r\n                else {\r\n                    await messageRefUser.set({\r\n                        currentRooms: firebase.firestore.FieldValue.arrayUnion(roomCodeInput)\r\n                    })\r\n                    setRoomCode(roomCodeInput)\r\n                    props.showJoinRoom(false)\r\n                }\r\n            })\r\n    }\r\n\r\n    const fontRatio = PixelRatio.getFontScale()\r\n    const { width, height } = useWindowDimensions()\r\n    var joinRoomPopupWidth = 400\r\n    if (width < 1280) {\r\n        joinRoomPopupWidth *= 0.75 * fontRatio\r\n    }\r\n    const styles = StyleSheet.create({\r\n        JoinRoomContainer: {\r\n            flex: 1,\r\n            flexDirection: 'column',\r\n            justifyContent: 'flex-start',\r\n            alignItems: 'center',\r\n            height: 250 * fontRatio,\r\n            width: joinRoomPopupWidth * fontRatio,\r\n            borderRadius: 20,\r\n            backgroundColor: '#fff',\r\n            position: 'absolute',\r\n            top: height / 2 - 125,\r\n            left: width / 2 - joinRoomPopupWidth / 2,\r\n            zIndex: 2,\r\n            shadowColor: '#000',\r\n            shadowOffset: { width: 0, height: -1, },\r\n            shadowOpacity: 0.9,\r\n            shadowRadius: 50,\r\n            elevation: 5,\r\n        },\r\n        JoinRoomTitle: {\r\n            fontSize: 20,\r\n            zIndex: 2,\r\n        },\r\n        JoinRoomTextInput: {\r\n            height: 70 * fontRatio,\r\n            width: joinRoomPopupWidth - 100,\r\n            fontSize: 15 * fontRatio,\r\n            backgroundColor: '#d5d8dc',\r\n            borderRadius: 20,\r\n            marginBottom: 10 * fontRatio,\r\n            textAlign: 'center',\r\n            outlineWidth: 0\r\n        },\r\n        DarkOverlay: {\r\n            flex: 1,\r\n            flexDirection: 'column',\r\n            justifyContent: 'flex-start',\r\n            alignItems: 'center',\r\n            width: width,\r\n            height: height,\r\n            backgroundColor: '#0b2946',\r\n            position: 'absolute',\r\n            top: 0,\r\n            left: 0,\r\n            zIndex: 1,\r\n            opacity: 0.8\r\n        },\r\n        JoinRoomHeader: {\r\n            flex: 1,\r\n            flexDirection: 'row',\r\n            justifyContent: 'center',\r\n            alignItems: 'center',\r\n            width: joinRoomPopupWidth * fontRatio,\r\n            maxHeight: 60 * fontRatio,\r\n            borderTopLeftRadius: 20,\r\n            borderTopRightRadius: 20,\r\n            backgroundColor: '#3498db'\r\n        },\r\n        JoinRoomInputContainer: {\r\n            flex: 1,\r\n            flexDirection: 'column',\r\n            justifyContent: 'center',\r\n            alignItems: 'center'\r\n        },\r\n        JoinRoomCloseButton: {\r\n            position: 'absolute',\r\n            top: 0,\r\n            left: 0,\r\n            flex: 1,\r\n            justifyContent: 'center',\r\n            alignItems: 'center',\r\n            backgroundColor: '#3498db',\r\n            marginTop: 15 * fontRatio,\r\n            marginLeft: 15 * fontRatio,\r\n            maxWidth: 30 * fontRatio,\r\n            maxHeight: 30 * fontRatio\r\n\r\n        },\r\n        CloseMenuText: {\r\n            fontSize: 20,\r\n            color: '#fff',\r\n            padding: 5 * fontRatio,\r\n        },\r\n        JoinRoomSubmit: {\r\n            flex: 1,\r\n            justifyContent: 'center',\r\n            alignItems: 'center',\r\n            borderRadius: 20,\r\n            backgroundColor: '#3498db',\r\n            maxHeight: 50 * fontRatio\r\n        },\r\n        JoinRoomButtonText: {\r\n            color: '#fff',\r\n            padding: 10 * fontRatio\r\n        }\r\n\r\n    })\r\n    return (\r\n        <View style={styles.DarkOverlay}>\r\n            <View style={styles.JoinRoomContainer}>\r\n                <View style={styles.JoinRoomHeader} >\r\n                    <TouchableOpacity onPress={() => props.showJoinRoom(false)} style={styles.JoinRoomCloseButton}>\r\n                        <Text style={styles.CloseMenuText}>X</Text>\r\n                    </TouchableOpacity>\r\n                    <Text style={styles.JoinRoomTitle}>Join a new room</Text>\r\n                </ View>\r\n                <View style={styles.JoinRoomInputContainer}>\r\n                    <TextInput onChangeText={text => setRoomCodeInput(text)} style={styles.JoinRoomTextInput} placeholder='Enter room code'></TextInput>\r\n                    <TouchableOpacity onPress={() => joinRoom()} style={styles.JoinRoomSubmit}>\r\n                        <Text style={styles.JoinRoomButtonText}>Join Room</Text>\r\n                    </TouchableOpacity>\r\n                </View>\r\n            </View>\r\n        </View>\r\n    )\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}