{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Seamus\\\\Documents\\\\ChatApp\\\\chat-app\\\\App.js\";\nimport React, { useEffect, useState } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport useWindowDimensions from \"react-native-web/dist/exports/useWindowDimensions\";\nimport { NavigationContainer } from '@react-navigation/native';\nimport { createStackNavigator } from '@react-navigation/stack';\nimport NavBar from \"./src/components/NavBar\";\nimport ChatBox from \"./src/screens/ChatBox\";\nimport AuthContext from \"./src/contexts/AuthContext\";\nimport firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport 'firebase/auth';\nimport * as FirebaseCore from 'expo-firebase-core';\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { useCollectionData } from 'react-firebase-hooks/firestore';\nimport * as GoogleSignIn from 'expo-google-sign-in';\nimport CreateRoomScreen from \"./src/components/CreateRoomScreen\";\nimport UsersRooms from \"./src/components/UsersRooms\";\nimport LoadingScreen from \"./src/screens/LoadingScreen\";\nimport { Provider } from 'react-native-paper';\nimport { theme } from \"./src/core/theme\";\nimport { StartScreen, LoginScreen, RegisterScreen, ForgotPasswordScreen, Dashboard } from \"./src/screens\";\n\nif (!firebase.apps.length) {\n  firebase.initializeApp(FirebaseCore.DEFAULT_APP_OPTIONS);\n} else {\n  firebase.app();\n}\n\nvar auth = firebase.auth();\nvar firestore = firebase.firestore();\nvar Stack = createStackNavigator();\nexport default function App() {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      userMobile = _useState2[0],\n      setUserMobile = _useState2[1];\n\n  var _useAuthState = useAuthState(auth),\n      _useAuthState2 = _slicedToArray(_useAuthState, 1),\n      user = _useAuthState2[0];\n\n  var _useState3 = useState('$KVUXRARV9U'),\n      _useState4 = _slicedToArray(_useState3, 2),\n      roomCode = _useState4[0],\n      setRoomCode = _useState4[1];\n\n  var _useState5 = useState(true),\n      _useState6 = _slicedToArray(_useState5, 2),\n      loadingApp = _useState6[0],\n      setLoadingApp = _useState6[1];\n\n  var _useWindowDimensions = useWindowDimensions(),\n      width = _useWindowDimensions.width,\n      height = _useWindowDimensions.height;\n\n  var messageRef = firestore.collection('rooms').doc(roomCode).collection('messages');\n  var query = messageRef.orderBy('createdAt', 'desc').limit(25);\n\n  var _useCollectionData = useCollectionData(query),\n      _useCollectionData2 = _slicedToArray(_useCollectionData, 1),\n      messages = _useCollectionData2[0];\n\n  useEffect(function () {\n    if (Platform.OS == 'android' || Platform.OS == 'ios') {\n      initAsync();\n    }\n  }, []);\n  var value = {\n    auth: auth,\n    firestore: firestore,\n    messageRef: messageRef,\n    messages: messages,\n    setRoomCode: setRoomCode,\n    roomCode: roomCode,\n    setLoadingApp: setLoadingApp\n  };\n  var styles = StyleSheet.create({\n    container: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      flex: 1,\n      flexDirection: 'row',\n      flexGrow: 0,\n      justifyContent: 'flex-start',\n      backgroundColor: '#2A2B2D',\n      zIndex: -1,\n      width: width,\n      height: height\n    },\n    OtherContainer: {\n      flex: 1,\n      flexDirection: 'column'\n    }\n  });\n\n  var initAsync = function initAsync() {\n    return _regeneratorRuntime.async(function initAsync$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(GoogleSignIn.initAsync());\n\n          case 2:\n            _syncUserWithStateAsync();\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var _syncUserWithStateAsync = function _syncUserWithStateAsync() {\n    var userMobileNew, credential;\n    return _regeneratorRuntime.async(function _syncUserWithStateAsync$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(GoogleSignIn.signInSilentlyAsync());\n\n          case 2:\n            userMobileNew = _context2.sent;\n            credential = firebase.auth.GoogleAuthProvider.credential(userMobileNew.idToken, userMobileNew.accessToken);\n            console.log('logged in with credentials: uid : ' + userMobileNew.idToken);\n            auth.signInWithCredential(credential);\n\n          case 6:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var signOutAsync = function signOutAsync() {\n    return _regeneratorRuntime.async(function signOutAsync$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return _regeneratorRuntime.awrap(GoogleSignIn.signOutAsync());\n\n          case 2:\n            setUserMobile(null);\n\n          case 3:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var signInAsync = function signInAsync() {\n    var _await$GoogleSignIn$s, type, _user, message;\n\n    return _regeneratorRuntime.async(function signInAsync$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.prev = 0;\n            _context4.next = 3;\n            return _regeneratorRuntime.awrap(GoogleSignIn.askForPlayServicesAsync());\n\n          case 3:\n            _context4.next = 5;\n            return _regeneratorRuntime.awrap(GoogleSignIn.signInAsync());\n\n          case 5:\n            _await$GoogleSignIn$s = _context4.sent;\n            type = _await$GoogleSignIn$s.type;\n            _user = _await$GoogleSignIn$s.user;\n\n            if (type === 'success') {\n              _syncUserWithStateAsync();\n\n              console.log('signed in');\n            }\n\n            _context4.next = 15;\n            break;\n\n          case 11:\n            _context4.prev = 11;\n            _context4.t0 = _context4[\"catch\"](0);\n            message = _context4.t0.message;\n            alert('login: Error:' + message);\n\n          case 15:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, null, [[0, 11]], Promise);\n  };\n\n  return React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 5\n    }\n  }, React.createElement(Provider, {\n    theme: theme,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }\n  }, React.createElement(NavigationContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 9\n    }\n  }, React.createElement(Stack.Navigator, {\n    initialRouteName: \"StartScreen\",\n    screenOptions: {\n      headerShown: false\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 11\n    }\n  }, React.createElement(Stack.Screen, {\n    name: \"StartScreen\",\n    component: StartScreen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 13\n    }\n  }), React.createElement(Stack.Screen, {\n    name: \"LoginScreen\",\n    component: LoginScreen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 13\n    }\n  }), React.createElement(Stack.Screen, {\n    name: \"RegisterScreen\",\n    component: RegisterScreen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }\n  }), React.createElement(Stack.Screen, {\n    name: \"Dashboard\",\n    component: Dashboard,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 13\n    }\n  }), React.createElement(Stack.Screen, {\n    name: \"ForgotPasswordScreen\",\n    component: ForgotPasswordScreen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }\n  })))), loadingApp ? null : null, React.createElement(AuthContext.Provider, {\n    value: value,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }\n  }, auth.currentUser ? null : null, React.createElement(View, {\n    style: styles.OtherContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 9\n    }\n  }, user ? React.createElement(NavBar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 19\n    }\n  }) : null, user ? React.createElement(ChatBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 19\n    }\n  }) : React.createElement(LoginScreen, {\n    googleLogin: signInAsync,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 33\n    }\n  }))), React.createElement(StatusBar, {\n    hidden: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }\n  }));\n}","map":{"version":3,"sources":["C:/Users/Seamus/Documents/ChatApp/chat-app/App.js"],"names":["React","useEffect","useState","NavigationContainer","createStackNavigator","NavBar","ChatBox","AuthContext","firebase","FirebaseCore","useAuthState","useCollectionData","GoogleSignIn","CreateRoomScreen","UsersRooms","LoadingScreen","Provider","theme","StartScreen","LoginScreen","RegisterScreen","ForgotPasswordScreen","Dashboard","apps","length","initializeApp","DEFAULT_APP_OPTIONS","app","auth","firestore","Stack","App","userMobile","setUserMobile","user","roomCode","setRoomCode","loadingApp","setLoadingApp","useWindowDimensions","width","height","messageRef","collection","doc","query","orderBy","limit","messages","Platform","OS","initAsync","value","styles","StyleSheet","create","container","position","top","left","flex","flexDirection","flexGrow","justifyContent","backgroundColor","zIndex","OtherContainer","_syncUserWithStateAsync","signInSilentlyAsync","userMobileNew","credential","GoogleAuthProvider","idToken","accessToken","console","log","signInWithCredential","signOutAsync","signInAsync","askForPlayServicesAsync","type","message","alert","headerShown","currentUser"],"mappings":"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","sourcesContent":["//import react features\nimport React, { useEffect, useState } from 'react';\nimport { StyleSheet, View, Platform, useWindowDimensions, } from 'react-native';\n\nimport { NavigationContainer } from '@react-navigation/native'\nimport { createStackNavigator } from '@react-navigation/stack'\n\n//import conponents\nimport NavBar from './src/components/NavBar';\nimport ChatBox from './src/screens/ChatBox';\n\n//import contexts\nimport AuthContext from './src/contexts/AuthContext'\n\n//import firebase utils\nimport firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport 'firebase/auth';\nimport * as FirebaseCore from 'expo-firebase-core';\nimport { useAuthState } from 'react-firebase-hooks/auth'\nimport { useCollectionData } from 'react-firebase-hooks/firestore';\n\n//import mobile google signin\nimport * as GoogleSignIn from 'expo-google-sign-in';\nimport CreateRoomScreen from './src/components/CreateRoomScreen';\nimport UsersRooms from './src/components/UsersRooms';\nimport LoadingScreen from './src/screens/LoadingScreen';\n\n\nimport { Provider } from 'react-native-paper'\nimport { theme } from './src/core/theme'\nimport {\n  StartScreen,\n  LoginScreen,\n  RegisterScreen,\n  ForgotPasswordScreen,\n  Dashboard,\n} from './src/screens'\n\n\n//initilase firebase\nif (!firebase.apps.length) {\n  firebase.initializeApp(FirebaseCore.DEFAULT_APP_OPTIONS);\n} else {\n  firebase.app(); // if already initialized, use that one\n}\nconst auth = firebase.auth();\nconst firestore = firebase.firestore()\n\n\n//create navigator stack\nconst Stack = createStackNavigator()\n\nexport default function App() {\n  //states\n  const [userMobile, setUserMobile] = useState(null);\n  const [user] = useAuthState(auth);\n  const [roomCode, setRoomCode] = useState('$KVUXRARV9U')\n  const [loadingApp, setLoadingApp] = useState(true)\n  const { width, height } = useWindowDimensions()\n\n  const messageRef = firestore.collection('rooms').doc(roomCode).collection('messages')\n  const query = messageRef.orderBy('createdAt', 'desc').limit(25);\n  const [messages] = useCollectionData(query)\n\n  useEffect(() => {\n    if (Platform.OS == 'android' || Platform.OS == 'ios') {\n      initAsync()\n    }\n  }, [])\n\n\n\n  //setup context provider values\n  const value = { auth, firestore, messageRef, messages, setRoomCode, roomCode, setLoadingApp }\n\n  //style sheet for app\n  const styles = StyleSheet.create({\n    container: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      flex: 1,\n      flexDirection: 'row',\n      flexGrow: 0,\n      justifyContent: 'flex-start',\n      backgroundColor: '#2A2B2D',\n      zIndex: -1,\n      width: width,\n      height: height\n    },\n    OtherContainer: {\n      flex: 1,\n      flexDirection: 'column',\n    }\n  });\n\n  //////////////google sign in stuff\n\n\n  const initAsync = async () => {\n    await GoogleSignIn.initAsync();\n    _syncUserWithStateAsync();\n  };\n\n  const _syncUserWithStateAsync = async () => {\n    const userMobileNew = await GoogleSignIn.signInSilentlyAsync();\n    const credential = firebase.auth.GoogleAuthProvider.credential(userMobileNew.idToken, userMobileNew.accessToken)\n    // login with credential\n    console.log('logged in with credentials: uid : ' + userMobileNew.idToken);\n    auth.signInWithCredential(credential);\n    //setUserMobile(userMobileNew)\n  };\n\n\n  const signOutAsync = async () => {\n    await GoogleSignIn.signOutAsync();\n    setUserMobile(null)\n  };\n  const signInAsync = async () => {\n    try {\n      await GoogleSignIn.askForPlayServicesAsync();\n      const { type, user } = await GoogleSignIn.signInAsync();\n      if (type === 'success') {\n        _syncUserWithStateAsync();\n        console.log('signed in')\n      }\n    } catch ({ message }) {\n      alert('login: Error:' + message);\n    }\n  };\n  ///////////\n\n  return (\n    <View style={styles.container}>\n      <Provider theme={theme}>\n        <NavigationContainer>\n          <Stack.Navigator\n            initialRouteName=\"StartScreen\"\n            screenOptions={{\n              headerShown: false,\n            }}\n          >\n            <Stack.Screen name=\"StartScreen\" component={StartScreen} />\n            <Stack.Screen name=\"LoginScreen\" component={LoginScreen} />\n            <Stack.Screen name=\"RegisterScreen\" component={RegisterScreen} />\n            <Stack.Screen name=\"Dashboard\" component={Dashboard} />\n            <Stack.Screen\n              name=\"ForgotPasswordScreen\"\n              component={ForgotPasswordScreen}\n            />\n          </Stack.Navigator>\n        </NavigationContainer>\n      </Provider>\n      {loadingApp ? null : null}\n      <AuthContext.Provider value={value}>\n        {auth.currentUser ? null : null}\n        <View style={styles.OtherContainer}>\n          {user ? <NavBar /> : null}\n          {user ? <ChatBox /> : <LoginScreen googleLogin={signInAsync} />}\n        </View>\n\n      </AuthContext.Provider>\n      <StatusBar hidden={true} />\n    </View>\n  )\n}\n\n/*\n      {loadingApp ? null : null}\n      <AuthContext.Provider value={value}>\n        {auth.currentUser ? null : null}\n        <View style={styles.OtherContainer}>\n          {user ? <NavBar /> : null}\n          {user ? <ChatBox /> : <LoginScreen googleLogin={signInAsync} />}\n        </View>\n\n      </AuthContext.Provider>\n      <StatusBar hidden={true} />\n*/\n"]},"metadata":{},"sourceType":"module"}